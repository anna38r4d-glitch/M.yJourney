.map-grid {
  display: grid;
  grid-template-columns: repeat(5, 60px);
  grid-gap: 10px;
  justify-content: center;
  margin-top: 20px;
}

.map-cell {
  width: 60px;
  height: 60px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s;
}

.map-cell:hover {
  transform: scale(1.1);
}

.level-complete {
  background-color: #4caf50 !important;
}

.next-map {
  background: linear-gradient(45deg, #ff6f61, #ffcc70, #6a5acd);
}

<div class="map-section">
  <h2>Your Adventure Map</h2>
  <div id="map-grid" class="map-grid"></div>
  <p id="coin-count">Coins: 0</p>
</div>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hero's Journey</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    #game { display: none; }
    .level { display: inline-block; width: 60px; height: 60px; margin: 8px;
             border: 2px solid black; border-radius: 10px; vertical-align: middle; }
    .player { width: 40px; height: 40px; border-radius: 50%; margin: auto; margin-top: 8px; }
    #goalsModal { display: none; position: fixed; top: 50%; left: 50%;
                  transform: translate(-50%, -50%); background: white; padding: 20px;
                  border: 2px solid black; border-radius: 10px; }
    #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
               background: rgba(0,0,0,0.5); }
    .closeBtn { cursor: pointer; color: red; float: right; font-weight: bold; }
  </style>
</head>
<body>

  <!-- Login -->
  <div id="login">
    <h1>Hero's Journey</h1>
    <input type="text" id="username" placeholder="Name"><br><br>
    <input type="password" id="password" placeholder="Passcode"><br><br>
    <label>Choose Skin Color:</label>
    <input type="color" id="skinColor" value="#ff0000"><br><br>
    <button onclick="startGame()">Done</button>
  </div>

  <!-- Game -->
  <div id="game">
    <h2>Map <span id="mapNum">1</span> | Coins: <span id="coins">0</span></h2>
    <div id="map"></div>
  </div>

  <!-- Overlay & Goals Modal -->
  <div id="overlay"></div>
  <div id="goalsModal">
    <span class="closeBtn" onclick="closeGoals()">X</span>
    <h3>Goals for Level <span id="levelNum"></span></h3>
    <ul id="goalsList"></ul>
    <input type="text" id="newGoal" placeholder="New goal...">
    <button onclick="addGoal()">Add</button><br><br>
    <button onclick="checkCompletion()">Finish Level</button>
  </div>

<script>
  let currentLevel = 1;
  let currentMap = 1;
  let coins = 0;
  let skinColor = "#ff0000";
  let goals = {};

  function startGame() {
    skinColor = document.getElementById("skinColor").value;
    document.getElementById("login").style.display = "none";
    document.getElementById("game").style.display = "block";
    renderMap();
  }

  function renderMap() {
    const mapDiv = document.getElementById("map");
    mapDiv.innerHTML = "";
    for (let i = 1; i <= 10; i++) {
      const level = document.createElement("div");
      level.className = "level";
      level.innerText = i;

      if (i === currentLevel) {
        const player = document.createElement("div");
        player.className = "player";
        player.style.background = skinColor;
        player.onclick = () => openGoals(i);
        level.appendChild(player);
      }
      mapDiv.appendChild(level);
    }
    document.getElementById("mapNum").innerText = currentMap;
    document.getElementById("coins").innerText = coins;
  }

  function openGoals(level) {
    document.getElementById("overlay").style.display = "block";
    document.getElementById("goalsModal").style.display = "block";
    document.getElementById("levelNum").innerText = level;
    renderGoals(level);
  }

  function closeGoals() {
    document.getElementById("overlay").style.display = "none";
    document.getElementById("goalsModal").style.display = "none";
  }

  function renderGoals(level) {
    const goalsList = document.getElementById("goalsList");
    goalsList.innerHTML = "";
    if (!goals[level]) goals[level] = [];
    goals[level].forEach((g, idx) => {
      const li = document.createElement("li");
      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = g.done;
      cb.onchange = () => { g.done = cb.checked; };
      li.appendChild(cb);
      li.append(" " + g.text);
      goalsList.appendChild(li);
    });
  }

  function addGoal() {
    const level = currentLevel;
    const newGoalText = document.getElementById("newGoal").value;
    if (newGoalText.trim() !== "") {
      goals[level].push({ text: newGoalText, done: false });
      document.getElementById("newGoal").value = "";
      renderGoals(level);
    }
  }

  function checkCompletion() {
    const levelGoals = goals[currentLevel] || [];
    if (levelGoals.length === 0) {
      alert("Add at least one goal!");
      return;
    }
    if (levelGoals.every(g => g.done)) {
      closeGoals();
      if (currentLevel < 10) {
        currentLevel++;
      } else {
        coins += 50;
        currentMap++;
        currentLevel = 1;
        goals = {};
        alert("ðŸŽ‰ You finished the map! Earned 50 coins!");
      }
      renderMap();
    } else {
      alert("Finish all goals first!");
    }
  }
</script>
</body>
</html>

